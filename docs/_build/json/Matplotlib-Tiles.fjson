{"body": "<div class=\"section\" id=\"matplotlib-tiles\">\n<h1>Matplotlib Tiles<a class=\"headerlink\" href=\"#matplotlib-tiles\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Tactic includes support for building tiles that display matplotlib\nimages. Every Matplotlib tile must have the minimum elements shown here:</p>\n<div class=\"code python highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@user_tile</span>\n<span class=\"k\">class</span> <span class=\"nc\">MyTile</span><span class=\"p\">(</span><span class=\"n\">TileBase</span><span class=\"p\">,</span> <span class=\"n\">MplFigure</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">draw_plot</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">init_mpl_figure</span><span class=\"p\">()</span>\n        <span class=\"c1\"># user code here</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render_content</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">draw_plot</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">create_figure_html</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>Notice that, unlike other tiles, matplotlib tiles must subclass both\n<code class=\"docutils literal notranslate\"><span class=\"pre\">TileBase</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">MplFigure</span></code>. <code class=\"docutils literal notranslate\"><span class=\"pre\">MplFigure</span></code> is a subclass of\nmatplotlib\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">Figure</span></code> class. In addition, every Matplotlib tile should\nhave a method <code class=\"docutils literal notranslate\"><span class=\"pre\">draw_plot</span></code> that draws directly into the tile instance\nas it would a matplotlib figure. <code class=\"docutils literal notranslate\"><span class=\"pre\">render_content</span></code> can do other work,\nbut it must call \u2018draw_plot\u2019, and then \u2018create_figure_html\u2019 to generate\nthe html for the tile. Note that \u2018draw_plot\u2019 will also be called each\ntime the user resizes the tile.</p>\n<p>The <a class=\"reference external\" href=\"Tile-Creator.html#creating-matplotlib-tiles\">Tile Creator</a> knows how\nto deal with MatplotlibTiles.</p>\n<p>In most cases, you\u2019ll want the first line of <code class=\"docutils literal notranslate\"><span class=\"pre\">draw_plot</span></code> to be\n<code class=\"docutils literal notranslate\"><span class=\"pre\">`self.init_mpl_figure()</span></code> &lt;Tile-Commands.html#plots&gt;`__. This initializes\nthe Figure class and must be called at least once before drawing into\nthe Figure. If you draw into the Figure without initializing again then\nyou\u2019ll be adding to an existing figure. So, since <code class=\"docutils literal notranslate\"><span class=\"pre\">draw_plot</span></code> is\nsupposed to redraw the figure for new conditions (i.e., a new tile size)\nyou\u2019ll normally want to reinitialize at the top of <code class=\"docutils literal notranslate\"><span class=\"pre\">draw_plot</span></code>.</p>\n<p>Here is example code for a tile that graphs a simple list of numbers:</p>\n<div class=\"code python highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@user_tile</span>\n<span class=\"k\">class</span> <span class=\"nc\">ListPlotter</span><span class=\"p\">(</span><span class=\"n\">TileBase</span><span class=\"p\">,</span> <span class=\"n\">MplFigure</span><span class=\"p\">):</span>\n    <span class=\"n\">category</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;plot&quot;</span>\n    <span class=\"k\">def</span> <span class=\"nf\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">main_id</span><span class=\"p\">,</span> <span class=\"n\">tile_id</span><span class=\"p\">,</span> <span class=\"n\">tile_name</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"n\">TileBase</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">main_id</span><span class=\"p\">,</span> <span class=\"n\">tile_id</span><span class=\"p\">,</span> <span class=\"n\">tile_name</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value_list</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">N</span> <span class=\"o\">=</span> <span class=\"mi\">20</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">options</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span>  <span class=\"p\">[</span>\n            <span class=\"p\">{</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;value_list_source&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;pipe_select&quot;</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;N&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;int&quot;</span><span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">draw_plot</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">MplFigure</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span>\n        <span class=\"n\">ax</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_subplot</span><span class=\"p\">(</span><span class=\"mi\">111</span><span class=\"p\">)</span>\n        <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">grid</span><span class=\"p\">(</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n        <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value_list</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n        <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value_list</span><span class=\"p\">,</span> <span class=\"s1\">&#39;bo&#39;</span><span class=\"p\">)</span>\n        <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_xticks</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">tight_layout</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render_content</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value_list</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_pipe_value</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value_list_source</span><span class=\"p\">)[</span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">N</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">draw_plot</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">create_figure_html</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n", "alabaster_version": "0.7.10", "display_toc": false, "title": "Matplotlib Tiles", "sourcename": "Matplotlib-Tiles.rst.txt", "customsidebar": null, "metatags": "", "current_page_name": "Matplotlib-Tiles", "next": {"link": "../D3-Tiles/", "title": "D3 Tiles"}, "rellinks": [["genindex", "General Index", "I", "index"], ["D3-Tiles", "D3 Tiles", "N", "next"], ["Tile-Commands", "Tile Commands", "P", "previous"]], "meta": {}, "parents": [], "sidebars": ["about.html", "navigation.html", "relations.html", "searchbox.html", "donate.html"], "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Matplotlib Tiles</a></li>\n</ul>\n", "prev": {"link": "../Tile-Commands/", "title": "Tile Commands"}, "page_source_suffix": ".rst"}